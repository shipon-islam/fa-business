(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7841],{3777:(e,t,r)=>{Promise.resolve().then(r.bind(r,9612))},5516:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);function n(){let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/profile");if(!e.ok)throw Error("Not authenticated");let r=await e.json();t(r.user)}catch(e){o(e.message),t(null)}finally{n(!1)}}()},[]),{user:e,loading:r,error:l}}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7234:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155);function n(e){let{className:t,name:r,...n}=e;return(0,a.jsx)("button",{className:"bg-gold hover:bg-deepGold transition-colors duration-300 text-[1.1rem] md:text-lg lg:text-xl px-6 py-2 rounded-md cursor-pointer  ".concat(t),...n,children:r})}},9612:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),n=r(7234);let l=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-md",children:t})};var o=r(6414),s=r(5516),i=r(5695),c=r(2115),d=r(3568);function u(){let{user:e}=(0,s.A)(),t=(0,c.useRef)(null);(0,i.useRouter)();let[r,u]=(0,c.useState)(!1),h=(0,c.useRef)(""),[m,p]=(0,c.useState)(!1),x=async t=>{let r=t.target.files[0];if(!r)return;let a=new FormData;a.append("avatar",r),(null==e?void 0:e.avatar)&&a.append("oldAvatar",e.avatar);try{let t=await fetch("/api/users/".concat(e.id),{method:"PUT",body:a});if(!t.ok)throw Error("Failed to upload profile picture");let r=await t.json();window.location.reload(),console.log(r)}catch(e){console.error("Error uploading profile picture:",e)}},f=async t=>{var r;t.preventDefault();let a=null==h||null==(r=h.current)?void 0:r.value;if(!a)return;let n=new FormData;n.append("name",a);try{p(!0);let t=await fetch("/api/users/".concat(e.id),{method:"PUT",body:n});if(!t.ok)throw Error("Failed to change name!");await t.json(),p(!1),window.location.reload()}catch(e){d.Ay.error(e.message),p(!1),console.error("Failed to change name!",e)}};return(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"max-w-[400px] mx-auto mt-10",children:(0,a.jsxs)(l,{className:"",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Account Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{children:"Profile picture"}),(0,a.jsx)("div",{className:"border w-fit rounded-md",children:(0,a.jsx)("img",{src:(null==e?void 0:e.avatar)?"/api/uploads/user/".concat(null==e?void 0:e.avatar):"/avatar.png",alt:"User Avatar",className:"w-40 h-40 "})}),(0,a.jsx)("input",{ref:t,type:"file",accept:"image/*",onChange:x,hidden:!0}),(0,a.jsx)("button",{onClick:()=>t.current.click(),className:"bg-gold px-4 py-1 rounded-lg mt-4 cursor-pointer",children:"Change Profile"})]}),(0,a.jsxs)("div",{className:"space-y-2 mt-8",children:[(0,a.jsxs)("p",{className:"flex gap-1 items-center",children:[(0,a.jsx)("strong",{children:"Name:"})," ",null==e?void 0:e.name," ",(0,a.jsx)("button",{onClick:()=>u(e=>!e),children:(0,a.jsx)(o.EditIcon,{className:"hover:text-gold cursor-pointer"})})]}),r&&(0,a.jsxs)("form",{onSubmit:f,className:"gap-1 flex",children:[(0,a.jsx)("input",{type:"text",ref:h,defaultValue:null==e?void 0:e.name,className:"border border-gold rounded-md py-0.5 px-2 focus:outline-none"}),(0,a.jsx)(n.A,{name:m?"Changing...":"Change",className:"!py-0.5 !px-2 !text-base"})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",null==e?void 0:e.email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Role:"})," ",null==e?void 0:e.role]})]})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3568,6414,8441,9303,7358],()=>t(3777)),_N_E=e.O()}]);